var I=({x:t,y:e},{x:r,y:o})=>Math.sqrt((r-t)**2+(o-e)**2),R={fromRectWithPercentInnerRadius(t,e){let{x:r,y:o,width:u,height:n}=t,c=Math.min(u,n)/2,a=e*.01*c,h={x:r+u/2,y:o+n/2};return{innerRadiusPerc:e,radius:c,innerRadius:a,center:h}},fromRectWithInnerRadius(t,e){let{x:r,y:o,width:u,height:n}=t,c=Math.min(u,n)/2,a=e*100/c,h={x:r+u/2,y:o+n/2};return{innerRadiusPerc:a,radius:c,innerRadius:e,center:h}}};var b=new WeakMap,F=/^["'](.+(?=["']$))["']$/,g=t=>typeof t!="string"?"":t.trim().replace(F,"$1"),V=new ResizeObserver(t=>{let e=new Set(t.map(r=>r.target));for(let r of e){let o=r.getRootNode().host;b.get(o).forEach(n=>{let c=getComputedStyle(o),a=g(c.getPropertyValue(n.customPropertyName));if(n.currentPropertyValue!==a){let h={target:o,previousValue:n.currentPropertyValue,value:a};n.currentPropertyValue=a,n.executeCallback(h)}})}}),M={},U=t=>{if(!M[t]){let e=document.createElement("template");e.innerHTML=`<style class="css-watch-observer__${t}">
        .css-watch-observer__${t}--target {
            font-size: 1rem;
            display: inline-block;
            visibility: hidden;
            position: absolute;
            z-index: -10000;
            pointer-events: none
        }
    
        .css-watch-observer__${t}--target::before {
            content: var(${t})
        }            
        </style>
        <span class="css-watch-observer__${t} css-watch-observer__${t}--target"></span>
        `,M[t]=e}return M[t]};function k(t,e){let r=U(t);return{observe:o=>{let u=b.get(o)||[];if(u.filter(c=>c.customPropertyName===t).length<=0){o.shadowRoot.append(document.importNode(r.content,!0));let c=o.shadowRoot.querySelector(`.css-watch-observer__${t}--target`);V.observe(c)}b.set(o,[...u,{currentPropertyValue:g(getComputedStyle(o).getPropertyValue(t)),executeCallback:e,customPropertyName:t}])},unobserve:o=>{let n=(b.get(o)||[]).filter(a=>a.executeCallback!==e||a.customPropertyName!==t);if(n.filter(a=>a.customPropertyName===t).length<=0){let a=o.shadowRoot.querySelector(`.css-watch-observer__${t}--target`);V.unobserve(a),o.shadowRoot.querySelectorAll(`.css-watch-observer__${t}`).forEach(h=>h.remove())}b.set(o,n)}}}var A=`<div class="container">
    <div class="color-wheel-container">
        <div class="inner-radius-calc"></div>
        <div class="color-wheel"></div>
    </div>
    <div class="slider-container">
        <div class="slider-container-half">
            <div class="slider"></div>
        </div>
    </div>
</div>
`;var L=`:host {
    color-scheme: only light;
    display: inline-flex;
    justify-content: center;
    align-items: center;
    --inner-radius: var(--color-wheel--inner-radius, 60%);
    --radius: 5cm;
    min-height: calc(2 * var(--radius) + 2*  var(--thumb-radius) + 12px);
    --thumb-radius: var(--color-wheel-thumb-radius-mobile, var(--color-wheel-thumb-radius, 0.6cm));
    --hue: 0;
    --value: 100;
    --lightness: 50;
    --saturation: 100;
    --default-ui-mode: "desktop"
}

:host([rotate-wheel]) {
    --ui-mode: "mobile"
}

/* Smartphones (portrait and landscape) ----------- */
@media only screen and (min-device-width : 320px) and (max-device-width : 480px) {
    :host {
        --default-ui-mode: "mobile"
    }
}

.container {
    position: relative;
    display: inline-block;
    overflow: hidden;
    width: 100%;
    height: 100%;
    box-sizing: border-box;
    padding: calc(var(--thumb-radius) + 6px);
}

.container--desktop-ui {
  --inner-radius: var(--color-wheel--inner-radius, 0.1%);
  --thumb-radius: var(--color-wheel-thumb-radius-desktop, var(--color-wheel-thumb-radius, 0.5cm));
}

.color-wheel-container {
  width: 100%;
  height: 100%;
  display: inline-block;
}

.color-wheel {
  width: 100%;
  height: 100%;
  --l-color: calc(var(--value) * 0.5%);
  --center-l-color: calc(var(--value) * 1%);
  pointer-events: auto;
  display: inline-block;
  touch-action: none;
  min-height: calc(2 * var(--radius));
  min-width: calc(2 * var(--radius));
  border-radius: 50%;
  background: radial-gradient(circle closest-side at center, hsl(0 0% var(--center-l-color)) var(--inner-radius),  transparent 100%), conic-gradient(
      hsl(360 100% var(--l-color)),
      hsl(345 100% var(--l-color)),
      hsl(330 100% var(--l-color)),
      hsl(315 100% var(--l-color)),
      hsl(300 100% var(--l-color)),
      hsl(285 100% var(--l-color)),
      hsl(270 100% var(--l-color)),
      hsl(255 100% var(--l-color)),
      hsl(240 100% var(--l-color)),
      hsl(225 100% var(--l-color)),
      hsl(210 100% var(--l-color)),
      hsl(195 100% var(--l-color)),
      hsl(180 100% var(--l-color)),
      hsl(150 100% var(--l-color)),
      hsl(135 100% var(--l-color)),
      hsl(120 100% var(--l-color)),
      hsl(105 100% var(--l-color)),
      hsl(90 100% var(--l-color)),
      hsl(60 100% var(--l-color)),
      hsl(45 100% var(--l-color)),
      hsl(30 100% var(--l-color)),
      hsl(15 100% var(--l-color)),
      hsl(0 100% var(--l-color))
  );

  /* calcs for antialiasing */
  mask-image: radial-gradient(circle closest-side at center, transparent calc(var(--inner-radius) - 1px), white var(--inner-radius), white calc(100% - 1px), transparent 100%);
  -webkit-mask-image: radial-gradient(circle closest-side at center, transparent calc(var(--inner-radius) - 1px), white var(--inner-radius),  white calc(100% - 1px), transparent 100%);
  transform-origin: center;

}

.container--hsl .color-wheel {
  --l-color: calc(var(--lightness) * 1%);
  --center-l-color: calc(var(--lightness) * 1%);
}

.container--mobile-ui .color-wheel {
  transform: rotateZ(calc(var(--hue) * 1deg));
}

.slider-container{
  pointer-events: none;
  position: absolute;
  aspect-ratio: 1 / 1;
  height: 100%;
  max-width: calc(100% - 6px - 2 * var(--thumb-radius));
  max-height: calc(100% - 6px - 2 * var(--thumb-radius));
  top: 50%;
  left: 50%;
  min-height: calc(2 * var(--radius));
  min-width: calc(2 * var(--radius));
  transform: translate(-50%, -50%) rotateZ(calc(var(--hue) * -1deg - 90deg));

}

.slider-container-half {
  position: absolute;
  inset: 0 0 0 50%;
}

.slider {
  pointer-events: none;
  touch-action: none;
  position: absolute;
  top: 50%;
  width: calc(2 * var(--thumb-radius));
  height: calc(2 * var(--thumb-radius));
  background: hsl(var(--hue), calc(var(--saturation) * 1%), calc((100% - var(--saturation) * 0.5%) * var(--value) / 100));
  border: 4px solid #888;
  border-radius: 50%;
  cursor: pointer;
  transform: translate(-50%, -50%);
  left: calc(var(--inner-radius) + (1% * var(--saturation)) - ( var(--saturation) * var(--inner-radius) / 100 ));
}

.container--hsl .slider {
  background: hsl(var(--hue), calc(var(--saturation) * 1%), calc(var(--lightness, 50) * 1%)) ;
}

.inner-radius-calc {
  visibility: position;
  z-index: -1;
  height: 1px;
  pointer-events: none;
  touch-action: none;
  width: var(--inner-radius);
}


.slider::before {
  display: block;
  position: absolute;
  top: -3px;
  bottom: -3px;
  left: -3px;
  right: -3px;
  background: transparent ;
  border-radius: 50%;
  border: 2px solid #ffffff;
  content: " ";
  pointer-events: none;
  touch-action: none;
}


.container--mobile-ui .slider-container{
  transform: translate(-50%, -50%) rotate(-90deg);
}

.container--mobile-ui .slider{
  pointer-events: auto;
}
`;var T=()=>{let t=document.createElement("template");return t.innerHTML=A,T=()=>t,t},H=()=>{let t=new CSSStyleSheet;return t.replaceSync(L),H=()=>t,t};function E(t){let e=t.shadowRoot.querySelector(".container"),{uiMode:r}=t;e.classList.toggle("container--desktop-ui",r==="desktop"),e.classList.toggle("container--mobile-ui",r==="mobile")}var Q=k("--ui-mode",({target:t})=>E(t)),G=k("--default-ui-mode",({target:t})=>E(t)),O=class extends HTMLElement{constructor(){super();let e=this.attachShadow({mode:"open"});e.adoptedStyleSheets=[H()];let r=T();e.append(document.importNode(r.content,!0));let o=e.querySelector(".color-wheel-container"),u=e.querySelector(".inner-radius-calc"),n=e.querySelector(".color-wheel"),c=e.querySelector(".slider"),a=window.getComputedStyle(n);Q.observe(this),G.observe(this),E(this),q(this),D(this);let h=()=>{let s=o.getBoundingClientRect(),l=a.transformOrigin.split(" "),d=s.top+parseInt(l[1]);return{x:s.left+parseInt(l[0]),y:d}},N=()=>{let s=o.getBoundingClientRect(),i=a.getPropertyValue("--inner-radius").trim();if(/[0-9]+%/g.test(i)){let d=parseInt(i);return R.fromRectWithPercentInnerRadius(s,d)}let l=u.getBoundingClientRect().width;return R.fromRectWithInnerRadius(s,l)},S=s=>{let i=l=>{l.preventDefault(),l.stopPropagation(),s(l)};globalThis.addEventListener("pointermove",i,{capture:!0}),globalThis.addEventListener("pointerup",()=>{globalThis.removeEventListener("pointermove",i,{capture:!0})},{once:!0,capture:!0})},_=({centerPoint:s,innerRadiusPerc:i,radius:l})=>({calculateSaturationFromMouseEvent(d){let p=I(s,{x:d.clientX,y:d.clientY}),P=Math.min(100,Math.max(0,p*100/l));return Math.round(Math.min(100,Math.max(0,(P-i)*100/(100-i))))}}),X=()=>{let s=h(),i=_({...N(),centerPoint:s});S(d=>{this.saturation=i.calculateSaturationFromMouseEvent({clientX:s.x,clientY:Math.min(s.y,d.clientY)});let p=new CustomEvent("input",{bubbles:!0});this.dispatchEvent(p)})},Y=s=>{let i=h(),{hue:l}=this,d=_({...N(),centerPoint:i}),p=w=>{let v=w.clientX-i.x,m=i.y-w.clientY;return Math.atan2(m,v)*-180/Math.PI},P=p(s);(this.uiMode||"").trim()==="mobile"?S(v=>{let m=p(v),f=Math.round(m-P+l+360)%360;this.hue=f;let C=new CustomEvent("input",{bubbles:!0});this.dispatchEvent(C)}):S(v=>{let m=p(v),f=Math.round(-m+360*2-90)%360;this.hue=f,this.saturation=d.calculateSaturationFromMouseEvent(v);let C=new CustomEvent("input",{bubbles:!0});this.dispatchEvent(C)})};n.addEventListener("pointerdown",s=>{s.preventDefault(),s.stopPropagation(),Y(s)}),c.addEventListener("pointerdown",s=>{s.preventDefault(),s.stopPropagation(),X()}),W($(this))}static get observedAttributes(){return["saturation","hue","lightness","value"]}attributeChangedCallback(e,r,o){if(r!==o)switch(e){case"saturation":return W(this);case"hue":return $(this);case"lightness":return q(this);case"value":return D(this)}}get uiMode(){let e=getComputedStyle(this.shadowRoot.querySelector(".container")),r=g(e.getPropertyValue("--ui-mode"));switch(r){case"desktop":case"mobile":return r}return g(e.getPropertyValue("--default-ui-mode"))}get hue(){let e=parseInt(this.getAttribute("hue"));return isNaN(e)?0:e}set hue(e){this.setAttribute("hue",e)}get saturation(){let e=parseInt(this.getAttribute("saturation"));return isNaN(e)?0:e}set saturation(e){this.setAttribute("saturation",e)}get value(){let e=parseInt(this.getAttribute("value"));return isNaN(e)?100:e}set value(e){this.setAttribute("value",e)}get lightness(){let e=parseInt(this.getAttribute("lightness"));return isNaN(e)?50:e}set lightness(e){this.setAttribute("lightness",e)}},B=t=>t.shadowRoot.querySelector(".container"),x=(t,e,r)=>(B(t)?.style.setProperty(e,r),t);function z(t){let e=B(t);if(!e)return;let r=t.hasAttribute("lightness")&&!t.hasAttribute("value");e.classList.toggle("container--hsl",r)}var $=t=>x(t,"--hue",t.hue),W=t=>x(t,"--saturation",t.saturation),q=t=>(z(t),x(t,"--lightness",t.lightness)),D=t=>(z(t),x(t,"--value",t.value)),J=new URL(import.meta.url),y=J.searchParams.get("named");y&&(customElements.get(y)!=null?console.error(`A custom element with name "${y}" already exists`):customElements.define(y,O));
//# sourceMappingURL=color-wheel.element.min.js.map
